<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>å®‰å“å…¼å®¹æ€§æµ‹è¯•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .test-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .test-card h2 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .test-result {
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
        }
        
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
            font-size: 14px;
            line-height: 1.6;
        }
        
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        button:active {
            background: #5568d3;
        }
    </style>
</head>
<body>
    <div class="test-card">
        <h2>ğŸ” ç³»ç»Ÿä¿¡æ¯æ£€æµ‹</h2>
        <div id="systemInfo" class="test-result info">æ£€æµ‹ä¸­...</div>
    </div>

    <div class="test-card">
        <h2>ğŸ“± æµè§ˆå™¨ä¿¡æ¯</h2>
        <div id="browserInfo" class="test-result info">æ£€æµ‹ä¸­...</div>
    </div>

    <div class="test-card">
        <h2>ğŸŒ ç½‘ç»œè¿æ¥æµ‹è¯•</h2>
        <button onclick="testNetwork()">æµ‹è¯•ç½‘ç»œ</button>
        <div id="networkResult" class="test-result info" style="margin-top: 10px;">ç‚¹å‡»æŒ‰é’®å¼€å§‹æµ‹è¯•</div>
    </div>

    <div class="test-card">
        <h2>ğŸ”¥ Firebaseè¿æ¥æµ‹è¯•</h2>
        <button onclick="testFirebase()">æµ‹è¯•Firebase</button>
        <div id="firebaseResult" class="test-result info" style="margin-top: 10px;">ç‚¹å‡»æŒ‰é’®å¼€å§‹æµ‹è¯•</div>
    </div>

    <div class="test-card">
        <h2>ğŸ“º è§†é¢‘/éŸ³é¢‘æƒé™æµ‹è¯•</h2>
        <button onclick="testMedia()">æµ‹è¯•åª’ä½“æƒé™</button>
        <div id="mediaResult" class="test-result info" style="margin-top: 10px;">ç‚¹å‡»æŒ‰é’®å¼€å§‹æµ‹è¯•</div>
    </div>

    <div class="test-card">
        <h2>ğŸ’¾ æœ¬åœ°å­˜å‚¨æµ‹è¯•</h2>
        <button onclick="testStorage()">æµ‹è¯•å­˜å‚¨</button>
        <div id="storageResult" class="test-result info" style="margin-top: 10px;">ç‚¹å‡»æŒ‰é’®å¼€å§‹æµ‹è¯•</div>
    </div>

    <div class="test-card">
        <h2>ğŸ¨ CSSåŠŸèƒ½æµ‹è¯•</h2>
        <button onclick="testCSS()">æµ‹è¯•CSS</button>
        <div id="cssResult" class="test-result info" style="margin-top: 10px;">ç‚¹å‡»æŒ‰é’®å¼€å§‹æµ‹è¯•</div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

    <script>
        // ç³»ç»Ÿä¿¡æ¯æ£€æµ‹
        function detectSystem() {
            const ua = navigator.userAgent;
            let info = '<strong>User Agent:</strong><br>' + ua + '<br><br>';
            
            info += '<strong>å¹³å°:</strong> ' + navigator.platform + '<br>';
            info += '<strong>è¯­è¨€:</strong> ' + navigator.language + '<br>';
            info += '<strong>åœ¨çº¿çŠ¶æ€:</strong> ' + (navigator.onLine ? 'âœ… åœ¨çº¿' : 'âŒ ç¦»çº¿') + '<br>';
            info += '<strong>Cookieå¯ç”¨:</strong> ' + (navigator.cookieEnabled ? 'âœ… æ˜¯' : 'âŒ å¦') + '<br>';
            info += '<strong>å±å¹•åˆ†è¾¨ç‡:</strong> ' + screen.width + 'x' + screen.height + '<br>';
            info += '<strong>å¯ç”¨åˆ†è¾¨ç‡:</strong> ' + screen.availWidth + 'x' + screen.availHeight + '<br>';
            info += '<strong>çª—å£å¤§å°:</strong> ' + window.innerWidth + 'x' + window.innerHeight + '<br>';
            
            // æ£€æµ‹æ˜¯å¦æ˜¯å®‰å“
            if (/Android/i.test(ua)) {
                const match = ua.match(/Android\s([0-9\.]*)/);
                info += '<br><strong>âœ… æ£€æµ‹åˆ°å®‰å“ç³»ç»Ÿ</strong><br>';
                if (match) {
                    info += '<strong>å®‰å“ç‰ˆæœ¬:</strong> ' + match[1] + '<br>';
                }
            } else {
                info += '<br><strong>âš ï¸ éå®‰å“ç³»ç»Ÿ</strong><br>';
            }
            
            // æ£€æµ‹æµè§ˆå™¨
            if (/Chrome/i.test(ua) && !/Edge/i.test(ua)) {
                info += '<strong>æµè§ˆå™¨:</strong> Chrome<br>';
            } else if (/Firefox/i.test(ua)) {
                info += '<strong>æµè§ˆå™¨:</strong> Firefox<br>';
            } else if (/Safari/i.test(ua) && !/Chrome/i.test(ua)) {
                info += '<strong>æµè§ˆå™¨:</strong> Safari<br>';
            } else if (/Edge/i.test(ua)) {
                info += '<strong>æµè§ˆå™¨:</strong> Edge<br>';
            } else {
                info += '<strong>æµè§ˆå™¨:</strong> å…¶ä»–<br>';
            }
            
            document.getElementById('systemInfo').innerHTML = info;
        }

        // æµè§ˆå™¨åŠŸèƒ½æ£€æµ‹
        function detectBrowser() {
            let info = '';
            
            info += '<strong>JavaScript:</strong> ' + (typeof window !== 'undefined' ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ') + '<br>';
            info += '<strong>LocalStorage:</strong> ' + (typeof Storage !== 'undefined' ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ') + '<br>';
            info += '<strong>IndexedDB:</strong> ' + (window.indexedDB ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ') + '<br>';
            info += '<strong>WebRTC:</strong> ' + (navigator.mediaDevices ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ') + '<br>';
            info += '<strong>Geolocation:</strong> ' + (navigator.geolocation ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ') + '<br>';
            info += '<strong>Touch Events:</strong> ' + ('ontouchstart' in window ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ') + '<br>';
            info += '<strong>Service Worker:</strong> ' + ('serviceWorker' in navigator ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ') + '<br>';
            
            document.getElementById('browserInfo').innerHTML = info;
        }

        // ç½‘ç»œæµ‹è¯•
        function testNetwork() {
            const result = document.getElementById('networkResult');
            result.className = 'test-result info';
            result.innerHTML = 'æµ‹è¯•ä¸­...';
            
            fetch('https://www.google.com/favicon.ico', { mode: 'no-cors' })
                .then(() => {
                    result.className = 'test-result success';
                    result.innerHTML = 'âœ… ç½‘ç»œè¿æ¥æ­£å¸¸<br>å¯ä»¥è®¿é—®å¤–éƒ¨èµ„æº';
                })
                .catch(err => {
                    result.className = 'test-result error';
                    result.innerHTML = 'âŒ ç½‘ç»œè¿æ¥å¤±è´¥<br>é”™è¯¯: ' + err.message + '<br><br>å¯èƒ½åŸå› :<br>1. æ²¡æœ‰ç½‘ç»œè¿æ¥<br>2. é˜²ç«å¢™é™åˆ¶<br>3. DNSé—®é¢˜';
                });
        }

        // Firebaseæµ‹è¯•
        function testFirebase() {
            const result = document.getElementById('firebaseResult');
            result.className = 'test-result info';
            result.innerHTML = 'æµ‹è¯•ä¸­...';
            
            try {
                // Firebaseé…ç½®
                const firebaseConfig = {
                    apiKey: "AIzaSyDpXMf8v-hH_EhWqYa0rQK3nK0K0yLZ9nY",
                    authDomain: "our-secret-172a7.firebaseapp.com",
                    databaseURL: "https://our-secret-172a7-default-rtdb.firebaseio.com",
                    projectId: "our-secret-172a7",
                    storageBucket: "our-secret-172a7.firebasestorage.app",
                    messagingSenderId: "635240049857",
                    appId: "1:635240049857:web:4c8e8f8a8e8f8a8e8f8a8e"
                };
                
                if (!firebase.apps.length) {
                    firebase.initializeApp(firebaseConfig);
                }
                
                const db = firebase.database();
                const testRef = db.ref('test/connection');
                
                testRef.set({
                    timestamp: Date.now(),
                    test: 'Android compatibility test'
                }).then(() => {
                    result.className = 'test-result success';
                    result.innerHTML = 'âœ… Firebaseè¿æ¥æˆåŠŸ<br>æ•°æ®åº“å¯ä»¥æ­£å¸¸è¯»å†™';
                }).catch(err => {
                    result.className = 'test-result error';
                    result.innerHTML = 'âŒ Firebaseè¿æ¥å¤±è´¥<br>é”™è¯¯: ' + err.message;
                });
            } catch (err) {
                result.className = 'test-result error';
                result.innerHTML = 'âŒ Firebaseåˆå§‹åŒ–å¤±è´¥<br>é”™è¯¯: ' + err.message + '<br><br>å¯èƒ½åŸå› :<br>1. Firebase SDKåŠ è½½å¤±è´¥<br>2. ç½‘ç»œé—®é¢˜<br>3. é…ç½®é”™è¯¯';
            }
        }

        // åª’ä½“æƒé™æµ‹è¯•
        function testMedia() {
            const result = document.getElementById('mediaResult');
            result.className = 'test-result info';
            result.innerHTML = 'æµ‹è¯•ä¸­...';
            
            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                result.className = 'test-result error';
                result.innerHTML = 'âŒ æµè§ˆå™¨ä¸æ”¯æŒåª’ä½“è®¾å¤‡è®¿é—®<br><br>è§£å†³æ–¹æ¡ˆ:<br>1. ä½¿ç”¨Chromeæµè§ˆå™¨<br>2. ç¡®ä¿æ˜¯HTTPSè¿æ¥<br>3. æ›´æ–°æµè§ˆå™¨åˆ°æœ€æ–°ç‰ˆæœ¬';
                return;
            }
            
            navigator.mediaDevices.getUserMedia({ video: true, audio: true })
                .then(stream => {
                    // ç«‹å³å…³é—­æµ
                    stream.getTracks().forEach(track => track.stop());
                    
                    result.className = 'test-result success';
                    result.innerHTML = 'âœ… åª’ä½“æƒé™æ­£å¸¸<br>æ‘„åƒå¤´å’Œéº¦å…‹é£å¯ä»¥è®¿é—®';
                })
                .catch(err => {
                    result.className = 'test-result error';
                    result.innerHTML = 'âŒ åª’ä½“æƒé™è¢«æ‹’ç»<br>é”™è¯¯: ' + err.name + '<br><br>è§£å†³æ–¹æ¡ˆ:<br>1. åœ¨æµè§ˆå™¨è®¾ç½®ä¸­å…è®¸æ‘„åƒå¤´/éº¦å…‹é£æƒé™<br>2. ç¡®ä¿ç½‘ç«™ä½¿ç”¨HTTPS<br>3. æ£€æŸ¥ç³»ç»Ÿæƒé™è®¾ç½®';
                });
        }

        // å­˜å‚¨æµ‹è¯•
        function testStorage() {
            const result = document.getElementById('storageResult');
            result.className = 'test-result info';
            result.innerHTML = 'æµ‹è¯•ä¸­...';
            
            try {
                // æµ‹è¯•localStorage
                localStorage.setItem('test', 'value');
                const value = localStorage.getItem('test');
                localStorage.removeItem('test');
                
                if (value === 'value') {
                    result.className = 'test-result success';
                    result.innerHTML = 'âœ… æœ¬åœ°å­˜å‚¨æ­£å¸¸<br>LocalStorageå¯ä»¥æ­£å¸¸ä½¿ç”¨';
                } else {
                    throw new Error('LocalStorageè¯»å†™ä¸ä¸€è‡´');
                }
            } catch (err) {
                result.className = 'test-result error';
                result.innerHTML = 'âŒ æœ¬åœ°å­˜å‚¨å¤±è´¥<br>é”™è¯¯: ' + err.message + '<br><br>å¯èƒ½åŸå› :<br>1. æµè§ˆå™¨éšç§æ¨¡å¼<br>2. å­˜å‚¨ç©ºé—´å·²æ»¡<br>3. æµè§ˆå™¨è®¾ç½®ç¦ç”¨';
            }
        }

        // CSSåŠŸèƒ½æµ‹è¯•
        function testCSS() {
            const result = document.getElementById('cssResult');
            result.className = 'test-result info';
            result.innerHTML = 'æµ‹è¯•ä¸­...';
            
            let info = '';
            
            // æµ‹è¯•backdrop-filter
            const testDiv = document.createElement('div');
            testDiv.style.backdropFilter = 'blur(10px)';
            document.body.appendChild(testDiv);
            const hasBackdrop = testDiv.style.backdropFilter === 'blur(10px)';
            document.body.removeChild(testDiv);
            
            info += '<strong>backdrop-filter:</strong> ' + (hasBackdrop ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒï¼ˆæ¯›ç»ç’ƒæ•ˆæœå¯èƒ½ä¸æ˜¾ç¤ºï¼‰') + '<br>';
            info += '<strong>CSS Grid:</strong> ' + (CSS.supports('display', 'grid') ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ') + '<br>';
            info += '<strong>CSS Flexbox:</strong> ' + (CSS.supports('display', 'flex') ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ') + '<br>';
            info += '<strong>CSS Variables:</strong> ' + (CSS.supports('--test', '0') ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ') + '<br>';
            info += '<strong>CSS Animations:</strong> ' + (CSS.supports('animation', '1s') ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ') + '<br>';
            
            result.className = 'test-result success';
            result.innerHTML = info;
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ£€æµ‹
        window.onload = function() {
            detectSystem();
            detectBrowser();
        };
    </script>
</body>
</html>
